
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/observ-vol-mgt/observ-vol-mgt/controller/docs/config/">
      
      
        <link rel="prev" href="../../">
      
      
        <link rel="next" href="../configuration_parameters/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>Config - Observability Volume Manager</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#config" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Observability Volume Manager" class="md-header__button md-logo" aria-label="Observability Volume Manager" data-md-component="logo">
      
  <img src="../../../docs/images/OVM.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Observability Volume Manager
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Config
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Observability Volume Manager" class="md-nav__button md-logo" aria-label="Observability Volume Manager" data-md-component="logo">
      
  <img src="../../../docs/images/OVM.png" alt="logo">

    </a>
    Observability Volume Manager
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Controller
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Controller
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Config
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration_parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration parameters
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Manager
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Manager
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manager/configurator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manager/configurator/docs/configuration_parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manager/alertmanager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AlertManager
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Processor
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Processor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../processor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    otel-collector-proxy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            otel-collector-proxy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../otel-collector-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    POC (Getting started)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            POC (Getting started)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/end2end/poc/insight_based_poc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Insights POC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://drive.google.com/file/d/1-rTCcJpnHUDHP-Cre3HotnRnzyWIatNi/view?usp=sharing" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/end2end/poc/otel_based_poc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    oTel POC
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    More
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            More
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/ec-metric-gen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metric Generation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/ec-metric-gen/doc/metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/end2end/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    End-To-End tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/examples/generate-synthetic-metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generate-synthetic-metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../contrib/fetch-offline-data/instana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instana Observability Data Fetchers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="config">Config</h1>
<p>Configuration of the pipeline stages is implemented via a yaml file.
The 'pipeline' section of the yaml file specifies the order in which to run the stages.
The 'parameters' section of the yaml file specifies the particular parameters for each of the stages.
Each stage has a name, and the names must match between the 'pipeline' and 'parameters' sections.</p>
<p>Standard field names for each stage are:
- name
- type (e.g. ingest, extract, insights)
- subtype (e.g. file ingest, promql ingest)
- input_data (list of input (lists))
- output_data (list of output (lists))
- config (configuration specific to this stage)</p>
<p>A sample config file might look like this:</p>
<div class="highlight"><pre><span></span><code>pipeline:
- name: ingest_stage
- name: extract_stage
  follows: [ingest_stage]
- name: insights_stage
  follows: [extract_stage]
parameters:
- name: ingest_stage
  type: ingest
  subtype: file
  input_data: []
  output_data: [signals]
  config:
    file_name: &lt;../some_file.json&gt;
- name: extract_stage
  type: extract
  subtype: &lt;some extract subtype&gt;
  input_data: [signals]
  output_data: [extracted_signals]
  config:
- name: insights_stage
  type: insights
  subtype: &lt;some insights subtype&gt;
  input_data: [extracted_signals]
  output_data: [text_insights]
  config:
</code></pre></div>
<p>A stage may follow multiple other stages, and may receive input from multiple earlier stages.</p>
<h1 id="data-types">Data Types</h1>
<h2 id="time-series">Time Series</h2>
<p>Time Series data is typically provided using the prometheus model with the following fields:
<div class="highlight"><pre><span></span><code>{
  &quot;status&quot;: &quot;success&quot;,
  &quot;data&quot;: {
    &quot;resultType&quot;: &quot;matrix&quot;,
    &quot;result&quot;: [
                {
                    &quot;metric&quot;: {
                        &quot;__name__&quot;: &quot;commit_latency_ms&quot;,
                        &quot;instance&quot;: &quot;02:00:06:ff:fe:4b:b5:ac&quot;,
                        &quot;plugin&quot;: &quot;ceph&quot;,
                        &quot;label&quot;: &quot;ceph&quot;,
                        &quot;snapshotId&quot;: &quot;T9Arslj9-1Y3UYv6biDGDizVqzI&quot;,
                        &quot;job&quot;: &quot;prometheus&quot;
                        },
                    &quot;values&quot;: [
                        [1715252491.0, 0.0], 
                        [1715252492.0, 0.0], 
                        ....
                        ]
                }
                .....
              ]
    }
}
</code></pre></div></p>
<p>The <code>metric</code> field contains various metadata, including the <code>__name__</code> of the metric being reported; other fields are optional.
The time series data are contained in the <code>values</code> field as a list of <code>&lt;timestamp, value&gt;</code> ordered pairs.</p>
<h2 id="signal">Signal</h2>
<p><code>Signal</code> is an internal data type used to store time-series data. 
It stores the metadata provided in the <code>metric</code> field and the time-series provided in the <code>values</code> field.</p>
<h2 id="signals">Signals</h2>
<p><code>Signals</code> is an internal data type used to store multiple objects of type <code>Signal</code>.
It has some internally defined metadata plus a list of <code>Signal</code> structures.</p>
<h1 id="details-about-some-types-of-stages">Details about some types of stages</h1>
<h2 id="ingest">Ingest</h2>
<p>An <code>ingest</code>-type stage typically reads data from some external source.
The details of the external source (file location, url, security parameters) are provided in the <code>config</code> section of the stage parameters.
An <code>ingest</code> stage is expected to have no <code>input_data</code> (<code>input_data: []</code>).
An <code>ingest</code> type stage outputs a list containing a single element (of type <code>Signals</code>).</p>
<h2 id="extract">Extract</h2>
<p>An <code>extract</code>-type stage typically performs some kind of transformation or metadata generation on <code>Signals</code>.
The <code>input_data</code> should contain a single <code>Signals</code> element and the <code>output_data</code> should contain a single <code>Signals</code> element.
For example:
<div class="highlight"><pre><span></span><code>- name: feature_extraction_tsfel
  type: extract
  subtype: tsfel
  input_data: [classified_signals]
  output_data: [extracted_signals]
</code></pre></div></p>
<h2 id="map-reduce">Map Reduce</h2>
<p>A map_reduce stage takes some input, breaks it up into some number of pieces,
and then runs some computation (possibly in parallel) on each of the pieces.
The output of the <code>map</code> operation is a list of sublists.
Each sublist is provided to a different instance of the <code>compute</code>.
The <code>compute</code> part of a map_reduce stage takes a single sublist and outputs a single sublist.
The outputs of each of the computations are then collected by the <code>reduce</code> operation into a combined output.
The config of a map_reduce stage looks like the following:</p>
<div class="highlight"><pre><span></span><code>- name: parallel_extract_stage
  type: map_reduce
  input_data: [signals]
  output_data: [extracted_signals]
  config:
    map_function:
      name: map1
      type: map
      subtype: simple
      config:
        &lt;any parameters needed to customize the map operation&gt;
    compute_function:
      name: extract_in_parallel
      type: extract
      subtype: tsfel
      config:
        &lt;any parameters needed to customize the compute operation&gt;
    reduce_function:
      name: reduce1
      type: reduce
      subtype: simple
      config:
        &lt;any parameters needed to customize the reduce operation&gt;
</code></pre></div>
<p>All map_reduce <code>compute</code> operations are of the same structure.
A single list as input (of type Signals) and a single list as output (of type Signals).
These must be preregistered in the code base as valid map_reduce <code>compute</code> operations.
The <code>map</code> and <code>reduce</code> operations must likewise be preregistered in the code base as such operations.</p>
<p>The map_reduce operation may be performed in parallel on multiple processes.
This is achieved by specifying an additional configuration parameter under global_settings.</p>
<div class="highlight"><pre><span></span><code>global_settings:
  number_of_workers: 8
</code></pre></div>
<h2 id="insights">Insights</h2>
<p>An <code>insights</code> stage performs the analytics on the data.
The <code>input_data</code> should contain a single <code>Signals</code> element (typically after feature extraction)
and the <code>output_data</code>  contains 3 lists: [signals_to_keep, signals_to_reduce, text_insights].</p>
<p>The following insights are currently supported:
- zero_values: identify signals that have constant zero value.
- fixed_values: identify signals that have constant non-zero value.
- monotonic: identify signals that are monotonic (typical of a counter)
- pairwise_correlations: identify signals that are directly correlated to some other signal.
- compound_correlations: identify signals that are some linear combination of other signals.</p>
<p>The order of the computed analytics should be specified.
It is expected that typically the zero-valued and fixed-valued signals are identified,
and then the remaining signals are tested for monotonicity or correlation.</p>
<p>The zero-valued, fixed-valued, and correlated signals are primary candidates to be dropped.
The monotonic signals are primary candidates to have their measurement frequency reduced.</p>
<p>The format of the <code>insights</code> stage is as follows:
<div class="highlight"><pre><span></span><code>- name: generate_insights
  type: insights
  subtype:
  input_data: [extracted_signals]
  output_data: [signals_to_keep, signals_to_reduce, text_insights]
  config:
    analysis_chain:
    - type: zero_values
      close_to_zero_threshold: 0.02
    - type: fixed_values
      filter_signals_by_tags: [&quot;zero_values&quot;]
    - type: monotonic
      filter_signals_by_tags: [&quot;zero_values&quot;,&quot;fixed_values&quot;]
    - type: pairwise_correlations
      filter_signals_by_tags: [&quot;zero_values&quot;,&quot;fixed_values&quot;]
      pairwise_similarity_threshold: 0.02
      pairwise_similarity_distance_method: pearson
    - type: compound_correlations
      filter_signals_by_tags: [&quot;zero_values&quot;,&quot;fixed_values&quot;,&quot;pairwise_correlations&quot;]
      compound_similarity_threshold: 1
</code></pre></div></p>
<p>Any subset of the available analytics may be specified in the <code>analytics_chain</code>.</p>
<p>The <code>filter_signals_by_tags</code> key specifies which signals to exclude from the particular analysis stage.
Thus, we do not include the zero-valued and fixed-valued signals in the pairwise-correlation analytic.
Additional parameters are availabe for some of the analytics.</p>
<p>These insights can be viewed in the <code>controller</code> gui (in the demo see http://localhost:5000/insights).</p>
<h2 id="config_generator">Config_generator</h2>
<p>The <code>config_generator</code> stage takes the data proviced by the <code>insights</code> stage and produces yaml files to configure
the metrics collector to utilize the inisights.
The <code>input_data</code> should contain 3 lists of signals: [extracted_signals, signals_to_keep, signals_to_reduce].</p>
<p>The format of the <code>config_generator</code> stage is as follows:
<div class="highlight"><pre><span></span><code>- name: config_generator_processor
  type: config_generator
  subtype: pmf_processor
  input_data: [extracted_signals, signals_to_keep, signals_to_reduce]
  output_data: [r_value]
  config:
    signal_filter_reduce_template: &quot;k8s_|nwdaf_|process_&quot;
    signal_filter_adjust_template: &quot;k8s_|nwdaf_|process_&quot;
    signal_name_template: &quot;$original_name&quot;
    signal_condition_template: &quot;cluster=$cluster and instance=$instance&quot;
    processor_id_template: &quot;$processor&quot;
    directory: /tmp
    url: http://manager:5010
</code></pre></div></p>
<p>The <code>signal_filter_reduce_template</code> parameter contains a regular expression of metric names that interest us.
Metrics whose names do not match the <code>signal_filter_reduce_template</code> are ignored when computing the list of metrics to reduce.
Similarly, metrics whose names do not match the <code>signal_filter_adjust_template</code> are ignored when computing the list of metrics whose sampling frequency to adjust.
The <code>url</code> parameter specifies where to send the produced generated configurations.
The <code>directory</code> parameter may be used to specify where to save (locally) a copy of the generated configuration files.</p>
<p>We support both PMF (<code>subtype: pmf_processor</code>) and otel (<code>subtype: otel_processor</code>) formats.</p>
<p>To specify a customized metric frequency for counters (when using otel), the following parameter can be used:</p>
<div class="highlight"><pre><span></span><code>  config:
    counter_default_interval: 30s
</code></pre></div>
<p>To specify a specific sampling frequency for specified metrics, the following config parameters may be used:
<div class="highlight"><pre><span></span><code>  config:
    metrics_adjustment:
    - name_template: process_
      interval: 20s
    - name:_template k8s_pod_
      interval: 10s
</code></pre></div>
These <code>name_template:</code> parameters match a regular expression of metric names.
In this example, all metrics whose names contain <code>process_</code> will have their metrics reporting adjusted to every 20s.</p>
<p>These can be combined into a configuration that looks like this:
<div class="highlight"><pre><span></span><code>  config:
    signal_filter_reduce_template: &quot;k8s_|nwdaf_|process_&quot;
    signal_filter_adjust_template: &quot;k8s_|nwdaf_|process_&quot;
    signal_name_template: &quot;$original_name&quot;
    signal_condition_template: &quot;resource.attributes[\&quot;processor\&quot;] == \&quot;$processor\&quot; and resource.attributes[\&quot;instance\&quot;] == \&quot;$instance\&quot;&quot;
    processor_id_template: &quot;$processor&quot;
    counter_default_interval: 30s
    metrics_adjustment:
    - name_template: process_
      interval: 20s
    - name_template: k8s_
      interval: 10s
    - name_template: .*
      tag_filter: [&quot;monotonic&quot;]
      interval: 30s
    directory: /tmp
    url: http://manager:5010
</code></pre></div>
The <code>name_template: .*</code> matches all regular expressions, and may be used to catch all other metrics that are not explicitly specified earlier.
The rules for <code>metrics_adjustment</code> are imposed on a first-match basis.
The <code>tag_filter</code> parameter specifies a list of tags to be checked to restrict the application of the <code>metrics_adjustment</code> rule.
In this example, only those signals that contain a tag <code>monotonic</code> will match this catch-all <code>name_template</code> and have their sampling frequency adjusted to 30 seconds.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>